(this.webpackJsonpmy_media_chat=this.webpackJsonpmy_media_chat||[]).push([[0],{23:function(e,t,n){e.exports=n(60)},28:function(e,t,n){},39:function(e,t,n){},51:function(e,t,n){},57:function(e,t,n){},58:function(e,t,n){},59:function(e,t,n){},60:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),s=n(18),o=n.n(s),i=(n(28),n(2)),c=n(1),u=n(3),l=n(4),m=n(6),h=n(5),d=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).state={username:""},n.onSubmit=n.onSubmit.bind(Object(m.a)(n)),n.onChange=n.onChange.bind(Object(m.a)(n)),n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"onSubmit",value:function(e){e.preventDefault(),this.props.onSubmit(this.state.username)}},{key:"onChange",value:function(e){this.setState({username:e.target.value})}},{key:"render",value:function(){return a.a.createElement("div",null,a.a.createElement("div",null,a.a.createElement("h2",null,"What is your username?"),a.a.createElement("form",{onSubmit:this.onSubmit},a.a.createElement("input",{type:"text",placeholder:"Type your fullName",onChange:this.onChange}),a.a.createElement("input",{type:"submit"}))))}}]),t}(r.Component),p=n(14),b=n(13),f=n.n(b),y=(n(39),n(69)),g=n(19),v=n.n(g),O=(n(51),function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(u.a)(this,Object(l.a)(t).call(this))).state={videoUri:"",isLoading:!0},e}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.term;v()({key:"AIzaSyCT5YNj0WpEUrt_4K8b3GZ6NoBZTOImXMA",term:t,q:t,maxResults:1},(function(t){console.log(t),e.setState({videoUri:"https://www.youtube.com/embed/".concat(t[0].id.videoId),isLoading:!1})})),console.log("data",t)}},{key:"render",value:function(){return this.state.isLoading?a.a.createElement(y.a,{className:"txt",variant:"body2",component:"p"},"Loading video..."):a.a.createElement("iframe",{src:this.state.videoUri,title:"Youtube Videos"})}}]),t}(r.Component)),j=n(21),E=n.n(j),S=(n(57),function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.currentUser,n=e.messages;return a.a.createElement("div",{className:"msgListContainer"},a.a.createElement("ul",null,n.map((function(e,r){return a.a.createElement("div",{className:"divElm",style:{alignItems:t.id===e.senderId?"flex-end":"flex-start"},key:r},a.a.createElement("div",{className:"cardDiv",style:{backgroundColor:t.id===e.senderId?"#e1f5fe":"#fafafa"}},a.a.createElement(y.a,{className:"title",color:"textSecondary",gutterBottom:!0},r>0&&(e.senderId===n[r-1].senderId||t.id===e.senderId)?"":e.senderId),"/"===e.text[0]?a.a.createElement(O,{term:e.text.replace("/","")}):a.a.createElement(y.a,{className:"txt",variant:"body2",component:"p"},e.text),a.a.createElement(y.a,{className:"txtDate",variant:"body2",component:"p"},E()(e.createdAt).format("LT"))))}))))}}]),t}(r.Component)),k=(n(58),function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).state={text:""},n.onSubmit=n.onSubmit.bind(Object(m.a)(n)),n.onChange=n.onChange.bind(Object(m.a)(n)),n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"onSubmit",value:function(e){e.preventDefault(),this.props.onSubmit(this.state.text),this.setState({text:""})}},{key:"onChange",value:function(e){this.setState({text:e.target.value}),this.props.onChange&&this.props.onChange()}},{key:"render",value:function(){return a.a.createElement("div",{className:"sendContainer"},a.a.createElement("form",{onSubmit:this.onSubmit},a.a.createElement("input",{type:"text",placeholder:"Type a message here then hit ENTER",multiple:!0,onChange:this.onChange,value:this.state.text})))}}]),t}(r.Component)),C=(n(59),function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return this.props.usersWhoAreTyping.length>0?a.a.createElement("div",{className:"containerTyping"},a.a.createElement(y.a,{className:"title",color:"textSecondary",gutterBottom:!0},"".concat(this.props.usersWhoAreTyping.slice(0,2).join(" and ")," is typing..."))):a.a.createElement("div",null)}}]),t}(r.Component)),U=n(8);function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){Object(U.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var x=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"renderUsers",value:function(){var e=this;return console.log(this.props.users),a.a.createElement("ul",null,this.props.users.map((function(t,n){return t.id===e.props.currentUser.id?a.a.createElement(I,{key:n,presenceState:"online"},a.a.createElement(y.a,{style:{color:"white"},variant:"body2",component:"p"},t.name," (You)")):a.a.createElement(I,{key:n,presenceState:t.presence.state},a.a.createElement(y.a,{style:{color:"white"},variant:"body2",component:"p"},t.name))})))}},{key:"render",value:function(){return this.props.users?this.renderUsers():a.a.createElement("ul",null,a.a.createElement(y.a,{style:{color:"white"},variant:"body2",component:"p"},"Loading..."))}}]),t}(r.Component),I=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e={li:{display:"flex",alignItems:"center",marginTop:5,marginBottom:5,paddingTop:2,paddingBottom:2},div:{borderRadius:"50%",width:11,height:11,marginRight:10}};return a.a.createElement("li",{style:e.li},a.a.createElement("div",{style:w({},e.div,{backgroundColor:"online"===this.props.presenceState?"#03a9f4":"#414756"})}),this.props.children)}}]),t}(r.Component),N=x,W=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).state={currentUser:{},currentRoom:{},messages:[],usersWhoAreTyping:[]},n.sendMessage=n.sendMessage.bind(Object(m.a)(n)),n.sendTypingEvent=n.sendTypingEvent.bind(Object(m.a)(n)),n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"sendTypingEvent",value:function(){this.state.currentUser.isTypingIn({roomId:this.state.currentRoom.id}).catch((function(e){return console.error("error",e)}))}},{key:"sendMessage",value:function(e){this.state.currentUser.sendMessage({text:e,roomId:this.state.currentRoom.id})}},{key:"componentDidMount",value:function(){var e=this;new f.a.ChatManager({instanceLocator:"v1:us1:027b5d6e-2c39-4cc2-b312-c0673f7f31ff",userId:this.props.currentUsername,tokenProvider:new f.a.TokenProvider({url:"http://localhost:3001/authenticate"})}).connect().then((function(t){return e.setState({currentUser:t}),t.subscribeToRoom({roomId:"956d5d68-9a86-4593-b864-8318e6f0a5f6",messageLimit:100,hooks:{onMessage:function(t){e.setState({messages:[].concat(Object(p.a)(e.state.messages),[t])})},onUserStartedTyping:function(t){e.setState({usersWhoAreTyping:[].concat(Object(p.a)(e.state.usersWhoAreTyping),[t.name])})},onUserStoppedTyping:function(t){e.setState({usersWhoAreTyping:e.state.usersWhoAreTyping.filter((function(e){return e!==t.name}))})},onPresenceChange:function(){return e.forceUpdate()},onUserJoined:function(){return e.forceUpdate()}}})})).then((function(t){e.setState({currentRoom:t})})).catch((function(e){return console.error("error",e)}))}},{key:"render",value:function(){return a.a.createElement("div",{className:"container"},a.a.createElement("div",{className:"whoIsDiv"},a.a.createElement("h1",null,"Who is Online"),a.a.createElement(N,{currentUser:this.state.currentUser,users:this.state.currentRoom.users})),a.a.createElement("div",{className:"messageDiv"},a.a.createElement(S,{messages:this.state.messages,currentUser:this.state.currentUser}),a.a.createElement(C,{usersWhoAreTyping:this.state.usersWhoAreTyping}),a.a.createElement(k,{onSubmit:this.sendMessage,onChange:this.sendTypingEvent})))}}]),t}(r.Component),A=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(u.a)(this,Object(l.a)(t).call(this))).state={currentUsername:"",currentScreen:"WhatIsYourUsernameScreen"},e.onUsernameSubmitted=e.onUsernameSubmitted.bind(Object(m.a)(e)),e}return Object(h.a)(t,e),Object(c.a)(t,[{key:"onUsernameSubmitted",value:function(e){var t=this;fetch("http://localhost:3001/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e})}).then((function(n){t.setState({currentUsername:e,currentScreen:"ChatScreen"})})).catch((function(e){return console.error("error",e)}))}},{key:"render",value:function(){return"WhatIsYourUsernameScreen"===this.state.currentScreen?a.a.createElement(d,{onSubmit:this.onUsernameSubmitted}):"ChatScreen"===this.state.currentScreen?a.a.createElement(W,{currentUsername:this.state.currentUsername}):void 0}}]),t}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(A,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[23,1,2]]]);
//# sourceMappingURL=main.bfea0183.chunk.js.map